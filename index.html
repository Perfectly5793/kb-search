<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Knowledge-base search</title>

  <!--  Algolia InstantSearch (CDN links keep it simple)  -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>

  <style>
    body {font-family: system-ui, sans-serif; margin: 2rem;}
    #hits .ais-Hits-item {padding:.5rem 0; border-bottom:1px solid #eee;}
  </style>
</head>

<body>
  <h1>Search</h1>
  <div id="searchbox"></div>
  <div id="hits"></div>
  <div id="pagination"></div>

  <script>
    /* 1 – connect to Algolia */
    const searchClient = algoliasearch(
      'OEA3R97T8L',                          // Application ID
      'fadad569da906720d26de36aee217360'     // Search-only API key
    );

    /* 2 – create an InstantSearch instance */
    const search = instantsearch({
      indexName: 'DatabaseArticlesClientFacingv201d517d8f856180ba9000fcab8b95d9c6', // <-- EXACT name
      searchClient,
    });

    /* 3 – add widgets */
    search.addWidgets([
      instantsearch.widgets.searchBox({
        container: '#searchbox',
        placeholder: 'Search articles…',
        showReset: true,
        showSubmit: true,
      }),
      instantsearch.widgets.hits({
        container: '#hits',
        templates: {
          item(hit) {
            return `
              <strong>${instantsearch.highlight({attribute:'Name', hit})}</strong>
              <p>${instantsearch.snippet({attribute:'Keywords', hit})}</p>
              ${hit.url ? `<a href="${hit.url}" target="_blank">open</a>` : ''}
            `;
          },
        },
      }),
      instantsearch.widgets.pagination({container: '#pagination'}),
    ]);

    /* 4 – go! */
    search.start();
  </script>
</body>
</html>
